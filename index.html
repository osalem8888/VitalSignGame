<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Vital Signs of Peace ‚Äì Matching Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #f5f5f5;
      --card-bg: #ffffff;
      --border-subtle: #e5e7eb;
      --primary: #2563eb;
      --primary-soft: #eff6ff;
      --success: #16a34a;
      --success-soft: #ecfdf3;
      --danger: #dc2626;
      --danger-soft: #fef2f2;
      --text-main: #111827;
      --text-muted: #6b7280;
      --radius-lg: 14px;
      --radius-pill: 999px;
      --shadow-soft: 0 4px 18px rgba(0, 0, 0, 0.06);
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 1rem;
      background: var(--bg);
      color: var(--text-main);
    }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      background: #ffffff;
      padding: 1rem;
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-soft);
    }

    h1 {
      font-size: 1.5rem;
      margin: 0 0 0.3rem;
    }

    .subtitle {
      font-size: 0.93rem;
      color: var(--text-muted);
      margin-bottom: 0.9rem;
    }

    .intro-box {
      border-radius: 12px;
      border: 1px solid var(--border-subtle);
      background: #f9fafb;
      padding: 0.85rem 0.95rem;
      margin-bottom: 1rem;
      font-size: 0.9rem;
    }

    .intro-box ul {
      margin: 0.35rem 0 0.15rem;
      padding-left: 1.1rem;
      font-size: 0.88rem;
    }

    .intro-emoji {
      font-size: 1.2rem;
      margin-right: 0.35rem;
    }

    .center {
      text-align: center;
    }

    button {
      border: none;
      padding: 0.55rem 1.05rem;
      border-radius: var(--radius-pill);
      cursor: pointer;
      font-size: 0.9rem;
    }

    button.primary {
      background: var(--primary);
      color: #ffffff;
    }

    button.secondary {
      background: #e5e7eb;
      color: #111827;
    }

    button:disabled {
      opacity: 0.5;
      cursor: default;
    }

    .hidden {
      display: none;
    }

    .top-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.7rem;
      margin-bottom: 0.8rem;
      flex-wrap: wrap;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      padding: 0.2rem 0.55rem;
      border-radius: var(--radius-pill);
      font-size: 0.8rem;
      border: 1px solid var(--border-subtle);
      background: #f9fafb;
    }

    .badge-emoji {
      font-size: 1rem;
    }

    .score-chip {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .board {
      display: grid;
      grid-template-columns: 2.1fr 4.9fr;
      gap: 0.8rem;
      align-items: flex-start;
    }

    @media (max-width: 900px) {
      .board {
        grid-template-columns: 1fr;
      }
    }

    .column-wrapper {
      border-radius: 12px;
      border: 1px solid var(--border-subtle);
      background: #f9fafb;
      padding: 0.55rem;
      font-size: 0.85rem;
    }

    .column-title {
      display: flex;
      align-items: center;
      gap: 0.35rem;
      font-weight: 600;
      margin-bottom: 0.15rem;
      font-size: 0.9rem;
    }

    .column-title .emoji {
      font-size: 1.05rem;
    }

    .column-subtitle {
      font-size: 0.78rem;
      color: var(--text-muted);
      margin-bottom: 0.25rem;
    }

    .drop-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 0.45rem;
    }

    @media (min-width: 1150px) {
      .drop-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    @media (max-width: 700px) {
      .drop-grid {
        grid-template-columns: 1fr;
      }
    }

    .drop-column {
      border-radius: 10px;
      border: 1px dashed #d1d5db;
      padding: 0.35rem 0.4rem;
      min-height: 60px;
      background: #fefefe;
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
      align-items: stretch;
      transition: border-color 0.15s ease, background 0.15s ease;
    }

    .drop-column.highlight {
      border-color: #93c5fd;
      background: #eff6ff;
    }

    .drop-header {
      display: flex;
      flex-direction: column;
      gap: 0.02rem;
      margin-bottom: 0.2rem;
    }

    .drop-title {
      font-size: 0.82rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }

    .drop-hint {
      font-size: 0.72rem;
      color: var(--text-muted);
    }

    .pool-wrapper {
      border-radius: 12px;
      border: 1px solid var(--border-subtle);
      background: #f9fafb;
      padding: 0.7rem;
    }

    .pool-title {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      font-weight: 600;
      margin-bottom: 0.15rem;
      font-size: 0.95rem;
    }

    .pool-title .emoji {
      font-size: 1.1rem;
    }

    .pool-subtitle {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-bottom: 0.4rem;
    }

    .card-pool {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
    }

    .statement-card {
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      background: var(--card-bg);
      padding: 0.35rem 0.6rem;
      font-size: 0.82rem;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      cursor: grab;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.04);
      max-width: 100%;
    }

    .statement-card span.emoji {
      font-size: 1rem;
    }

    .statement-text {
      white-space: normal;
    }

    .statement-card.correct {
      border-color: var(--success);
      background: var(--success-soft);
    }

    .statement-card.incorrect {
      border-color: var(--danger);
      background: var(--danger-soft);
    }

    .statement-card.neutral {
      border-color: var(--border-subtle);
      background: var(--card-bg);
    }

    .bottom-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.7rem;
      margin-top: 0.8rem;
      flex-wrap: wrap;
    }

    .feedback-box {
      border-radius: 10px;
      border: 1px solid var(--border-subtle);
      background: #f9fafb;
      padding: 0.55rem 0.7rem;
      font-size: 0.84rem;
    }

    .feedback-title {
      font-weight: 600;
      margin-bottom: 0.2rem;
      display: flex;
      align-items: center;
      gap: 0.3rem;
    }

    .feedback-title .emoji {
      font-size: 1rem;
    }

    .feedback-text {
      font-size: 0.84rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <section id="intro-screen">
      <h1>Vital Signs of Peace ‚Äì Matching Game</h1>
      <p class="subtitle">
        Practice recognizing both <strong>positive</strong> and <strong>negative</strong> expressions of the Peace Impact Framework‚Äôs vital signs.
      </p>

      <div class="intro-box">
        <div><span class="intro-emoji">üß©</span><strong>Premise:</strong></div>
        <p>
          The Peace Impact Framework talks about five vital signs: Physical Violence, Agency, Polarization,
          Institutional Legitimacy, and Resource Investment in Peace/Violence.
          Each has a positive side (e.g. safety, social cohesion) and a negative side (e.g. fear, powerlessness).
        </p>
        <div><span class="intro-emoji">üéØ</span><strong>Your task:</strong></div>
        <ul>
          <li>Drag each statement into the vital sign where it fits best.</li>
          <li>Notice how each vital sign can show up in both <strong>positive</strong> and <strong>negative</strong> ways.</li>
          <li>Click <strong>Check answers</strong> to see how you did.</li>
        </ul>
        <p style="margin-top:0.4rem;font-size:0.84rem;color:var(--text-muted);">
          Remember: the same context might show multiple vital signs at once. This game just asks you to pick the
          <em>main</em> one each statement is pointing to.
        </p>
        <div class="center" style="margin-top:0.6rem;">
          <button class="primary" id="start-btn">Start game</button>
        </div>
      </div>
    </section>

    <section id="game-screen" class="hidden">
      <div class="top-row">
        <div class="badge">
          <span class="badge-emoji">üìä</span>
          <span>Match the vital signs</span>
        </div>
        <div class="badge">
          <span class="badge-emoji">‚≠ê</span>
          <span class="score-chip" id="score-chip">Correct placements: 0 / 10</span>
        </div>
      </div>

      <div class="board">
        <div class="column-wrapper">
          <div class="column-title">
            <span class="emoji">üìå</span>
            <span>Vital signs</span>
          </div>
          <div class="column-subtitle">
            Drop each statement under the vital sign it best represents. Titles include both the
            <strong>negative</strong> and <strong>positive</strong> expressions.
          </div>
          <div class="drop-grid" id="drop-grid">
            <!-- Columns inserted by JS -->
          </div>
        </div>

        <div class="pool-wrapper">
          <div class="pool-title">
            <span class="emoji">üí¨</span>
            <span>Statements</span>
          </div>
          <div class="pool-subtitle">
            Drag these expressions of people‚Äôs experiences and perceptions into the matching vital sign.
          </div>
          <div class="card-pool" id="card-pool">
            <!-- Cards inserted by JS -->
          </div>
        </div>
      </div>

      <div class="bottom-row">
        <div class="feedback-box" id="feedback-box" style="display:none;">
          <div class="feedback-title">
            <span class="emoji">üí°</span>
            <span>Feedback</span>
          </div>
          <div class="feedback-text" id="feedback-text">
            Positive and negative expressions of each vital sign help you see both early warning signals and
            signs of progress. Where you see fear, powerlessness, and dehumanization, you can also look for
            safety, agency, and cohesion to build on.
          </div>
        </div>

        <div style="display:flex;gap:0.5rem;">
          <button class="secondary" id="reset-btn">Reset</button>
          <button class="primary" id="check-btn">Check answers</button>
        </div>
      </div>
    </section>
  </div>

  <script>
    const vitalSigns = [
      {
        id: "physical_violence",
        icon: "üõ°Ô∏è",
        title: "Physical Violence / Safety",
        hint: "Fear, injury, attack vs. feeling safe in everyday life."
      },
      {
        id: "personal_agency",
        icon: "üí™",
        title: "Agency / Powerlessness",
        hint: "Belief in one‚Äôs ability to influence change vs. feeling nothing can be done."
      },
      {
        id: "polarization",
        icon: "ü§ù",
        title: "Polarization / Social Cohesion",
        hint: "Dehumanization and division vs. cooperation and trust across groups."
      },
      {
        id: "institutional_legitimacy",
        icon: "üèõÔ∏è",
        title: "Institutional Legitimacy",
        hint: "Perceptions that institutions are fair, responsive, and accountable."
      },
      {
        id: "resource_investment",
        icon: "üå±",
        title: "Resource Investment in Peace/Violence",
        hint: "Where time and money are actually flowing ‚Äì towards peace or towards war."
      }
    ];

    // Positive + negative examples for each vital sign
    const statements = [
      // Physical Violence / Safety
      {
        id: "s1",
        text: "People are afraid to leave their homes after dark because of recent attacks.",
        vitalSign: "physical_violence",
        emoji: "üö®"
      },
      {
        id: "s2",
        text: "Most people feel safe walking alone at night in their neighborhood.",
        vitalSign: "physical_violence",
        emoji: "üåô"
      },
      // Agency / Powerlessness
      {
        id: "s3",
        text: "Community members believe they can work together to change local problems.",
        vitalSign: "personal_agency",
        emoji: "ü§ù"
      },
      {
        id: "s4",
        text: "Many people feel that nothing they do will change the situation in their community.",
        vitalSign: "personal_agency",
        emoji: "üòî"
      },
      // Polarization / Social Cohesion
      {
        id: "s5",
        text: "People say the ‚Äòother side‚Äô cannot be trusted and should be avoided.",
        vitalSign: "polarization",
        emoji: "‚ö†Ô∏è"
      },
      {
        id: "s6",
        text: "People from different groups cooperate on shared projects, even when they disagree.",
        vitalSign: "polarization",
        emoji: "ü§ù"
      },
      // Institutional Legitimacy
      {
        id: "s7",
        text: "Local authorities listen to community concerns and respond in a fair way.",
        vitalSign: "institutional_legitimacy",
        emoji: "üìã"
      },
      {
        id: "s8",
        text: "Many people believe officials are corrupt and only serve those with money or connections.",
        vitalSign: "institutional_legitimacy",
        emoji: "üí∏"
      },
      // Resource Investment in Peace/Violence
      {
        id: "s9",
        text: "Most public resources are spent on security forces and weapons, with little for peacebuilding.",
        vitalSign: "resource_investment",
        emoji: "üí£"
      },
      {
        id: "s10",
        text: "Significant time and money are being invested in activities that strengthen peace in the community.",
        vitalSign: "resource_investment",
        emoji: "üïäÔ∏è"
      }
    ];

    const introScreen = document.getElementById("intro-screen");
    const gameScreen = document.getElementById("game-screen");
    const startBtn = document.getElementById("start-btn");
    const resetBtn = document.getElementById("reset-btn");
    const checkBtn = document.getElementById("check-btn");
    const scoreChipEl = document.getElementById("score-chip");
    const dropGridEl = document.getElementById("drop-grid");
    const cardPoolEl = document.getElementById("card-pool");
    const feedbackBoxEl = document.getElementById("feedback-box");

    let currentPlacements = {}; // statementId -> vitalSignId or "pool"

    function initGame() {
      introScreen.classList.add("hidden");
      gameScreen.classList.remove("hidden");
      feedbackBoxEl.style.display = "none";
      buildDropColumns();
      buildCards();
      resetPlacements();
      updateScoreDisplay();
    }

    function buildDropColumns() {
      dropGridEl.innerHTML = "";
      vitalSigns.forEach((vs) => {
        const col = document.createElement("div");
        col.className = "drop-column";
        col.dataset.vitalId = vs.id;

        const header = document.createElement("div");
        header.className = "drop-header";

        const title = document.createElement("div");
        title.className = "drop-title";
        const iconSpan = document.createElement("span");
        iconSpan.textContent = vs.icon;
        const textSpan = document.createElement("span");
        textSpan.textContent = vs.title;

        title.appendChild(iconSpan);
        title.appendChild(textSpan);

        const hint = document.createElement("div");
        hint.className = "drop-hint";
        hint.textContent = vs.hint;

        header.appendChild(title);
        header.appendChild(hint);
        col.appendChild(header);

        col.addEventListener("dragover", handleDragOver);
        col.addEventListener("drop", handleDrop);
        col.addEventListener("dragenter", () => col.classList.add("highlight"));
        col.addEventListener("dragleave", () => col.classList.remove("highlight"));

        dropGridEl.appendChild(col);
      });
    }

    function buildCards() {
      cardPoolEl.innerHTML = "";
      statements.forEach((st) => {
        const card = document.createElement("div");
        card.className = "statement-card neutral";
        card.draggable = true;
        card.dataset.statementId = st.id;

        card.addEventListener("dragstart", handleDragStart);
        card.addEventListener("dragend", handleDragEnd);

        const emojiSpan = document.createElement("span");
        emojiSpan.className = "emoji";
        emojiSpan.textContent = st.emoji;

        const textSpan = document.createElement("span");
        textSpan.className = "statement-text";
        textSpan.textContent = st.text;

        card.appendChild(emojiSpan);
        card.appendChild(textSpan);

        cardPoolEl.appendChild(card);
      });

      // Allow dropping back to pool
      cardPoolEl.addEventListener("dragover", handleDragOver);
      cardPoolEl.addEventListener("drop", handleDrop);
    }

    function resetPlacements() {
      currentPlacements = {};
      statements.forEach((st) => {
        currentPlacements[st.id] = "pool";
      });
      document.querySelectorAll(".statement-card").forEach((card) => {
        card.classList.remove("correct", "incorrect");
        card.classList.add("neutral");
      });
      feedbackBoxEl.style.display = "none";
      updateScoreDisplay(false);
    }

    let draggedCardId = null;

    function handleDragStart(e) {
      const card = e.target.closest(".statement-card");
      if (!card) return;
      draggedCardId = card.dataset.statementId;
      e.dataTransfer.effectAllowed = "move";
      e.dataTransfer.setData("text/plain", draggedCardId);
    }

    function handleDragEnd() {
      draggedCardId = null;
      document
        .querySelectorAll(".drop-column")
        .forEach((col) => col.classList.remove("highlight"));
    }

    function handleDragOver(e) {
      e.preventDefault();
      e.dataTransfer.dropEffect = "move";
    }

    function handleDrop(e) {
      e.preventDefault();
      const target = e.currentTarget;
      const statementId = e.dataTransfer.getData("text/plain") || draggedCardId;
      if (!statementId) return;

      const card = document.querySelector(
        `.statement-card[data-statement-id="${statementId}"]`
      );
      if (!card) return;

      // Move card to this container
      if (target.classList.contains("drop-column")) {
        target.appendChild(card);
        currentPlacements[statementId] = target.dataset.vitalId;
      } else if (target.id === "card-pool") {
        target.appendChild(card);
        currentPlacements[statementId] = "pool";
      }

      target.classList.remove("highlight");
      card.classList.remove("correct", "incorrect");
      card.classList.add("neutral");
      updateScoreDisplay(false);
    }

    function updateScoreDisplay(showRealScore = true) {
      if (!showRealScore) {
        scoreChipEl.textContent = `Correct placements: ? / ${statements.length}`;
        return;
      }
      let correctCount = 0;
      statements.forEach((st) => {
        const placedVital = currentPlacements[st.id];
        if (placedVital === st.vitalSign) correctCount++;
      });
      scoreChipEl.textContent = `Correct placements: ${correctCount} / ${statements.length}`;
    }

    function checkAnswers() {
      let correctCount = 0;
      statements.forEach((st) => {
        const placedVital = currentPlacements[st.id];
        const card = document.querySelector(
          `.statement-card[data-statement-id="${st.id}"]`
        );
        if (!card) return;

        if (placedVital === st.vitalSign) {
          card.classList.remove("neutral", "incorrect");
          card.classList.add("correct");
          correctCount++;
        } else {
          card.classList.remove("neutral", "correct");
          card.classList.add("incorrect");
        }
      });

      updateScoreDisplay(true);
      feedbackBoxEl.style.display = "block";
    }

    // Event listeners
    startBtn.addEventListener("click", initGame);
    resetBtn.addEventListener("click", resetPlacements);
    checkBtn.addEventListener("click", checkAnswers);
  </script>
</body>
</html>
